AOS.init();const swiper=new Swiper(".swiper-slider",{centeredSlides:!0,slidesPerView:1,grabCursor:!0,freeMode:!1,loop:!0,mousewheel:!0,keyboard:{enabled:!0},autoplay:{delay:3e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",dynamicBullets:!0,clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{481:{slidesPerView:1,spaceBetween:20},769:{slidesPerView:1.25,spaceBetween:20},1024:{slidesPerView:1.25,spaceBetween:20}}});if($("#fund_security").length>0){const e=document.getElementById("scroll_box"),t=document.getElementById("img_doller"),n=document.getElementById("img_euro"),o=document.getElementById("img_pound");new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(t.classList.remove("img-doller-move-out"),n.classList.remove("img-euro-move-out"),o.classList.remove("img-pound-move-out"),t.classList.add("img-doller-move-in"),n.classList.add("img-euro-move-in"),o.classList.add("img-pound-move-in")):(t.classList.remove("img-doller-move-in"),n.classList.remove("img-euro-move-in"),o.classList.remove("img-pound-move-in"),t.classList.add("img-doller-move-out"),n.classList.add("img-euro-move-out"),o.classList.add("img-pound-move-out"))}))}),{threshold:.8}).observe(e)}$("#pivot_point_calculator_form").length>0&&$("#pivot_point_calculator_form").on("submit",(function(e){e.preventDefault(),$.ajax({url:"https://www.zedcapital.mu/pivot-point-calculator",method:"POST",data:$(this).serialize(),success:function(e){$(".result").removeClass("d-none"),$("#standardPivotPoint").html("<b>Pivot Point:</b> "+e.standard.pivotPoint),$("#standardR1").html("<b>Resistance 1:</b> "+e.standard.r1),$("#standardS1").html("<b>Support 1:</b> "+e.standard.s1),$("#standardR2").html("<b>Resistance 2:</b> "+e.standard.r2),$("#standardS2").html("<b>Support 2:</b> "+e.standard.s2),$("#standardR3").html("<b>Resistance 3:</b> "+e.standard.r3),$("#standardS3").html("<b>Support 3:</b> "+e.standard.s3),$("#fibonacciPivotPoint").html("<b>Pivot Point:</b> "+e.fibonacci.pivotPoint),$("#fibonacciR1").html("<b>Resistance 1:</b> "+e.fibonacci.r1),$("#fibonacciS1").html("<b>Support 1:</b> "+e.fibonacci.s1),$("#fibonacciR2").html("<b>Resistance 2:</b> "+e.fibonacci.r2),$("#fibonacciS2").html("<b>Support 2:</b> "+e.fibonacci.s2),$("#fibonacciR3").html("<b>Resistance 3:</b> "+e.fibonacci.r3),$("#fibonacciS3").html("<b>Support 3:</b> "+e.fibonacci.s3),$("#camarillaPivotPoint").html("<b>Pivot Point:</b> "+e.camarilla.pivotPoint),$("#camarillaR1").html("<b>Resistance 1:</b> "+e.camarilla.r1),$("#camarillaS1").html("<b>Support 1:</b> "+e.camarilla.s1),$("#camarillaR2").html("<b>Resistance 2:</b> "+e.camarilla.r2),$("#camarillaS2").html("<b>Support 2:</b> "+e.camarilla.s2),$("#camarillaR3").html("<b>Resistance 3:</b> "+e.camarilla.r3),$("#camarillaS3").html("<b>Support 3:</b> "+e.camarilla.s3)},error:function(e){var t=e.responseJSON.errors,n="";$.each(t,(function(e,t){n+=t[0]+"\n"})),alert(n)}})})),$("#forex_profit_calculator_form").length>0&&$("#forex_profit_calculator_form").on("submit",(function(e){e.preventDefault(),$.ajax({url:"https://www.zedcapital.mu/forex-profit-calculator",method:"POST",data:$(this).serialize(),success:function(e){$("#profit").text("Your profit is: $"+e.profit)},error:function(e){var t=e.responseJSON.errors,n="";$.each(t,(function(e,t){n+=t[0]+"\n"})),alert(n)}})})),$("#contact_us").length>0&&$("#contact_us").on("submit",(function(e){function t(){$("#name-error").text(""),$("#email-error").text(""),$("#phone-error").text(""),$("#subject-error").text(""),$("#message-error").text("")}t(),e.preventDefault(),$.ajax({url:"https://www.zedcapital.mu/contact-us",method:"POST",data:$(this).serialize(),success:function(e){$(".sent-message").text("").css("display","none"),e.errors?($("#name-error").text(e.errors.name),$("#email-error").text(e.errors.email),$("#phone-error").text(e.errors.phone),$("#subject-error").text(e.errors.name),$("#message-error").text(e.errors.email)):($(".sent-message").text(e.message).css("display","block"),$("#contact_us")[0].reset(),t())}})})),$(document).ready((function(){$(".openLiveAccount").on("click",(function(){window.open("https://cabinet.zedcapital.mu/register","_blank")}))})),$(document).ready((function(){$(".loginLiveAccount").on("click",(function(){window.open("https://cabinet.zedcapital.mu/login","_blank")}))})),$(document).ready((function(){$(".zedAcademyOpen").on("click",(function(){window.open(url+"zed-academy.php","_blank")}))}));const swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:"btn btn-success me-2",cancelButton:"btn btn-danger"},buttonsStyling:!1});if($("#openMT5WebTrader").length>0&&document.getElementById("openMT5WebTrader").addEventListener("click",(function(){swalWithBootstrapButtons.fire({title:"Choose Trading Account",showCancelButton:!0,confirmButtonText:"Live",cancelButtonText:"Demo",reverseButtons:!0}).then((e=>{e.isConfirmed?window.open("https://webtrader.zedcapital.mu/terminal","_blank"):e.dismiss===Swal.DismissReason.cancel&&window.open("https://demo.zedcapital.mu/terminal","_blank")}))})),$("#openDesktopMT5WebTrader").length>0&&(document.getElementById("openDesktopMT5WebTrader").addEventListener("click",(function(){swalWithBootstrapButtons.fire({title:"Choose Trading Account",showCancelButton:!0,confirmButtonText:"Live",cancelButtonText:"Demo",reverseButtons:!0}).then((e=>{e.isConfirmed?window.open("https://webtrader.zedcapital.mu/terminal","_blank"):e.dismiss===Swal.DismissReason.cancel&&window.open("https://demo.zedcapital.mu/terminal","_blank")}))})),document.getElementById("openMobileDesktopMT5WebTrader").addEventListener("click",(function(){swalWithBootstrapButtons.fire({title:"Choose Trading Account",showCancelButton:!0,confirmButtonText:"Live",cancelButtonText:"Demo",reverseButtons:!0}).then((e=>{e.isConfirmed?window.open("https://webtrader.zedcapital.mu/terminal","_blank"):e.dismiss===Swal.DismissReason.cancel&&window.open("https://demo.zedcapital.mu/terminal","_blank")}))}))),$("#openFooterDesktopMT5WebTrader").length>0&&document.getElementById("openFooterDesktopMT5WebTrader").addEventListener("click",(function(){swalWithBootstrapButtons.fire({title:"Choose Trading Account",showCancelButton:!0,confirmButtonText:"Live",cancelButtonText:"Demo",reverseButtons:!0}).then((e=>{e.isConfirmed?window.open("https://webtrader.zedcapital.mu/terminal","_blank"):e.dismiss===Swal.DismissReason.cancel&&window.open("https://demo.zedcapital.mu/terminal","_blank")}))})),$("#openPlatformDesktopMT5WebTrader").length>0&&document.getElementById("openPlatformDesktopMT5WebTrader").addEventListener("click",(function(){swalWithBootstrapButtons.fire({title:"Choose Trading Account",showCancelButton:!0,confirmButtonText:"Live",cancelButtonText:"Demo",reverseButtons:!0}).then((e=>{e.isConfirmed?window.open("https://webtrader.zedcapital.mu/terminal","_blank"):e.dismiss===Swal.DismissReason.cancel&&window.open("https://demo.zedcapital.mu/terminal","_blank")}))})),$(".owl-carousel").length>0&&$(".owl-carousel").owlCarousel({loop:!0,margin:20,nav:!1,dots:!0,autoplay:!0,autoplayTimeout:3e3,responsive:{0:{items:1},768:{items:2},992:{items:3}}}),$("#market-slides").length>0){const a=2.2,s=[{name:"New York",slug:"us",flag:"US",lat:40.7128,lng:-74.006,open:13,close:22},{name:"London",slug:"gb",flag:"GB",lat:51.5074,lng:-1.1278,open:8,close:17},{name:"Tokyo",slug:"jp",flag:"JP",lat:35.6895,lng:139.6917,open:0,close:9},{name:"Sydney",slug:"au",flag:"AU",lat:-33.8688,lng:151.2093,open:22,close:7},{name:"Frankfurt",slug:"de",flag:"DE",lat:52.1109,lng:11.6821,open:7,close:16},{name:"Zurich",slug:"ch",flag:"CH",lat:47.3769,lng:8.5417,open:8,close:17},{name:"Toronto",slug:"ca",flag:"CA",lat:43.6532,lng:-79.3832,open:13,close:22},{name:"Hong Kong",slug:"hk",flag:"HK",lat:22.3193,lng:114.1694,open:1,close:10},{name:"Shanghai",slug:"cn",flag:"CN",lat:31.2304,lng:121.4737,open:1,close:9},{name:"Shenzhen",slug:"cn",flag:"CN",lat:22.5431,lng:114.0579,open:1,close:9},{name:"Euronext",slug:"nl",flag:"NL",lat:53.3676,lng:4.9041,open:7,close:16},{name:"Mumbai",slug:"in",flag:"IN",lat:19.076,lng:72.8777,open:3.5,close:12.5}];function checkMarketOpen(e){const t=new Date,n=t.getUTCHours()+t.getUTCMinutes()/60,o=e.open,a=e.close;return(6!=t.getDay()&&0!=t.getDay()||"IN"!=e.flag)&&(n>=o&&n<a||a<o&&(n>=o||n<a))}function formatTime(e){const t=Math.floor(e),n=Math.round(60*(e-t));return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function buildTooltipContent(e){const t=new Date,n=t.getUTCHours()+t.getUTCMinutes()/60,o=new Date(t.toLocaleString("en-US",{timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),a=e.open,s=e.close,i=checkMarketOpen(e);let l=0;if(i){const e=s>a?s-a:24-a+s,t=n>=a?n-a:24-a+n;l=Math.min(100,t/e*100)}return`\n        <div class="map-tooltip">\n            <div class="title"><img src='https://flagcdn.com/w20/${e.slug}.webp'/ alt='${e.name}'> ${e.name}</div>\n            <div>Local time: <b>${o}</b></div>\n            <div class="status ${i?"open":"closed"}">${i?"OPEN":"CLOSED"}</div>\n            <div class="timeline"><div class="bar" style="width:${l.toFixed(1)}%;"></div></div>\n            <div style="font-size:12px;">Session: ${formatTime(a)}-${formatTime(s)} UTC</div>\n        </div>`}function renderMarkets(){const e=document.getElementById("market-slides");e.innerHTML="";const t=new Date,n=t.getUTCHours()+t.getUTCMinutes()/60;for(let t=0;t<s.length;t+=4){const o=s.slice(t,t+4).map((e=>{let t=e.open,o=e.close,a=checkMarketOpen(e),s=0;if(a){s=(n>=t?n-t:24-t+n)/(o>t?o-t:24-t+o)*100}return`\n            <div class="col-md-3 mb-3">\n                <div class="market ${a?"":"closed"}">\n                    <h5><img src='https://flagcdn.com/w40/${e.slug}.webp'/ alt='${e.name}'> ${e.name}</h5>\n                    <div class="status">${a?"OPEN":"CLOSED"}</div>\n                    <div class="timeline"><div class="bar" style="width:${a?s.toFixed(1):0}%;"></div></div>\n                    <small>Hours: ${formatTime(t)} - ${formatTime(o)} (UTC)</small>\n                </div>\n            </div>\n            `})).join("");e.innerHTML+=`\n            <div class="carousel-item ${0===t?"active":""}">\n                <div class="row justify-content-center px-4">\n                    ${o}\n                </div>\n            </div>\n        `}}renderMarkets(),setInterval(renderMarkets,6e4);const i=window.innerWidth<768;function initMap(){const e=new google.maps.Map(document.getElementById("map"),{center:{lat:15,lng:10},zoom:a,minZoom:a,maxZoom:a,draggable:i,scrollwheel:i,disableDoubleClickZoom:i,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:i,gestureHandling:"none",styles:[{featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f1f1f1"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#f1eeee"},{weight:1.5}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"off"}]}]});s.forEach((t=>{const n=checkMarketOpen(t),o=`https://flagcdn.com/w80/${t.slug}.webp`;class a extends google.maps.OverlayView{constructor(e,t){super(),this.position=e,this.map=t,this.div=null,this.setMap(t)}onAdd(){this.div=document.createElement("div"),this.div.className=n?"pulse-marker":"static-marker",this.div.style.backgroundImage=`url(${o})`,this.div.style.backgroundSize="24px 24px";this.getPanes().overlayMouseTarget.appendChild(this.div),this.div.addEventListener("mouseover",(()=>{s.setContent(buildTooltipContent(t)),s.setPosition(this.position),s.open(this.map)})),this.div.addEventListener("mouseout",(()=>s.close()))}draw(){const e=this.getProjection().fromLatLngToDivPixel(this.position);e&&this.div&&(this.div.style.left=e.x-16+"px",this.div.style.top=e.y-16+"px")}onRemove(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)}}const s=new google.maps.InfoWindow;new a(new google.maps.LatLng(t.lat,t.lng),e)})),setInterval((()=>e.panTo(e.getCenter())),6e4)}}$("#newsContainer").length>0&&document.addEventListener("DOMContentLoaded",(async()=>{const e=document.getElementById("newsContainer"),t=document.getElementById("loader"),n=document.getElementById("errorMsg");try{const n=await fetch("https://livechart.zedcapital.com:5000/api/news?pageSize=9");if(!n.ok)throw new Error("Network response was not ok");const o=(await n.json()).data||[];if(t.style.display="none",0===o.length)return void(e.innerHTML='<p class="text-center text-muted">No news available.</p>');o.forEach((t=>{const n="Positive"===t.sentiment?"sentiment-positive":"Negative"===t.sentiment?"sentiment-negative":"sentiment-neutral",o=t.topics?.map((e=>`<span class="badge bg-secondary topic-badge">${e}</span>`)).join(" ")||"",a=`\n                <div class="col-sm-6 col-lg-4 mb-4 d-flex">\n                <div class="card news-card flex-fill">\n                    <div class="card-body d-flex flex-column">\n                    <h6 class="card-title mb-2">\n                        <a href="${t.url}" target="_blank" class="text-decoration-none text-dark">\n                        ${t.title}\n                        </a>\n                    </h6>\n                    <p class="card-text small mb-1"><strong>Source:</strong> ${t.source}</p>\n                    <p class="card-text small mb-1"><strong>Pair:</strong> ${t.pair}</p>\n                    <p class="card-text small mb-1"><strong>Sentiment:</strong> <span class="${n}">${t.sentiment}</span></p>\n                    ${o?`<div class="mb-2">${o}</div>`:""}\n                    <p class="card-text small text-muted mt-auto">🕓 ${t.published_gst||""}</p>\n                    </div>\n                </div>\n                </div>\n            `;e.insertAdjacentHTML("beforeend",a)}))}catch(e){console.error("Error fetching news:",e),t.style.display="none",n.classList.remove("d-none")}}));